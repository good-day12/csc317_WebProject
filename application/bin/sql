CREATE TABLE IF NOT EXISTS csc317db.users (
  id INT NOT NULL AUTO_INCREMENT,
  username VARCHAR(64) NOT NULL,
  email VARCHAR(128) NOT NULL,
  password VARCHAR(255) NOT NULL,
  createdAt DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  UNIQUE INDEX id_UNIQUE (id ASC) VISIBLE,
  UNIQUE INDEX username_UNIQUE (username ASC) VISIBLE,
  UNIQUE INDEX email_UNIQUE (email ASC) VISIBLE)
ENGINE = InnoDB

CREATE TABLE IF NOT EXISTS csc317db.posts (
  id INT NOT NULL AUTO_INCREMENT,
  title VARCHAR(128) NOT NULL,
  description TEXT NOT NULL,
  image VARCHAR(4096) NOT NULL,
  thumbnail VARCHAR(4096) NOT NULL,
  fk_authorId INT NOT NULL,
  createAt DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  UNIQUE INDEX id_UNIQUE (id ASC) VISIBLE,
  INDEX postauthor_idx (fk_authorId ASC) VISIBLE,
  CONSTRAINT postauthor
    FOREIGN KEY (fk_authorId)
    REFERENCES csc317db.users (id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB

CREATE TABLE IF NOT EXISTS csc317db.comments (
  id INT NOT NULL AUTO_INCREMENT,
  text TEXT NOT NULL,
  fk_authorId INT NOT NULL,
  fk_postsId INT NOT NULL,
  createdAt DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  UNIQUE INDEX id_UNIQUE (id ASC) VISIBLE,
  INDEX commentAuthor_idx (fk_authorId ASC) VISIBLE,
  INDEX commentPost_idx (fk_postsId ASC) VISIBLE,
  CONSTRAINT commentAuthor
    FOREIGN KEY (fk_authorId)
    REFERENCES csc317db.users (id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT commentPost
    FOREIGN KEY (fk_postsId)
    REFERENCES csc317db.posts (id)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB